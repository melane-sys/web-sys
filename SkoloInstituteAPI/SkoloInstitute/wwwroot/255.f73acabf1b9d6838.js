"use strict";(self.webpackChunkskolo_ang=self.webpackChunkskolo_ang||[]).push([[255],{6255:(W,w,u)=>{u.r(w),u.d(w,{AuthenticationModule:()=>B});var d=u(6814),c=u(2824),o=u(95),h=u(553),e=u(4769),p=u(2859);let v=(()=>{class t{constructor(){this.validateConfirmPassword=i=>s=>{const r=s.value;return""===r?null:r!==i.value?{mustMatch:!0}:null}}static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var f=u(3188);function Z(t,l){if(1&t&&(e.TgZ(0,"div",34),e._UZ(1,"span",35),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("innerHTML",i.errorMessage,e.oJD)}}function T(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Please provide a valid email"),e.qZA())}function b(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Email is required"),e.qZA())}function C(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Password is required"),e.qZA())}function U(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Confirmation is required"),e.qZA())}function q(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Passwords must match"),e.qZA())}function P(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"User type is required"),e.qZA())}let A=(()=>{class t{constructor(i,s,r){this.authService=i,this.passConfValidator=s,this.router=r,this.errorMessage="",this.showError=!1,this.validateControl=n=>this.registerForm.get(n).invalid&&this.registerForm.get(n).touched,this.hasError=(n,a)=>this.registerForm.get(n).hasError(a),this.registerUser=n=>{this.showError=!1;const a={...n};this.authService.registerUser("student"===a.userType?"api/accounts/registration":"api/accounts/registration/school",{firstName:a.firstName,lastName:a.lastName,email:a.email,password:a.password,confirmPassword:a.confirm,clientURI:h.N.clientUrl+"/authentication/emailconfirmation"}).subscribe({next:_=>this.router.navigate(["/authentication/login"]),error:_=>{this.errorMessage=_.message,this.showError=!0}})}}ngOnInit(){this.registerForm=new o.cw({firstName:new o.NI(""),lastName:new o.NI(""),email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required]),confirm:new o.NI(""),userType:new o.NI("student",[o.kI.required])}),this.registerForm.get("confirm").setValidators([o.kI.required,this.passConfValidator.validateConfirmPassword(this.registerForm.get("password"))])}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.$),e.Y36(v),e.Y36(c.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-register-user"]],decls:59,vars:9,consts:[[1,"sign-up-in-section","bg-light","ptb-20"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-5","col-md-8","col-12"],[1,"text-center","mb-4","top-header"],[1,"mb-3","font-weight-normal"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-signin"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],["for","firstName"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],["for","lastName"],["type","email","id","email","formControlName","email",1,"form-control"],["for","email"],[1,"text-danger"],[4,"ngIf"],["type","password","id","password","formControlName","password",1,"form-control"],["for","password"],["type","password","id","confirm","formControlName","confirm",1,"form-control"],["for","confirm"],[1,"mb-3"],[1,"form-label"],[1,"form-check"],["type","radio","id","student","value","student","formControlName","userType",1,"form-check-input"],["for","student",1,"form-check-label"],["type","radio","id","school","value","school","formControlName","userType",1,"form-check-input"],["for","school",1,"form-check-label"],[1,"text-danger","mt-2"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-primary","mt-3","d-block","w-100",3,"disabled"],[1,"font-monospace","fw-medium","text-center","text-muted","mt-2","mb-0"],["routerLink","/authentication/login",1,"text-decoration-none"],["role","alert",1,"alert","alert-danger"],[3,"innerHTML"]],template:function(s,r){1&s&&(e._UZ(0,"app-close-header"),e.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),e._uU(7,"Create an account"),e.qZA()(),e.YNc(8,Z,2,1,"div",6),e.TgZ(9,"main",7)(10,"form",8),e.NdJ("ngSubmit",function(){return r.registerUser(r.registerForm.value)}),e.TgZ(11,"div",9),e._UZ(12,"input",10),e.TgZ(13,"label",11),e._uU(14,"First Name:"),e.qZA()(),e.TgZ(15,"div",9),e._UZ(16,"input",12),e.TgZ(17,"label",13),e._uU(18,"Last Name:"),e.qZA()(),e.TgZ(19,"div",9),e._UZ(20,"input",14),e.TgZ(21,"label",15),e._uU(22,"Email:"),e.qZA(),e.TgZ(23,"span",16),e.YNc(24,T,2,0,"em",17),e.YNc(25,b,2,0,"em",17),e.qZA()(),e.TgZ(26,"div",9),e._UZ(27,"input",18),e.TgZ(28,"label",19),e._uU(29,"Password:"),e.qZA(),e.TgZ(30,"span",16),e.YNc(31,C,2,0,"em",17),e.qZA()(),e.TgZ(32,"div",9),e._UZ(33,"input",20),e.TgZ(34,"label",21),e._uU(35,"Confirm Password:"),e.qZA(),e.TgZ(36,"span",16),e.YNc(37,U,2,0,"em",17),e.YNc(38,q,2,0,"em",17),e.qZA()(),e.TgZ(39,"div",22)(40,"label",23),e._uU(41,"User Type:"),e.qZA(),e.TgZ(42,"div",24),e._UZ(43,"input",25),e.TgZ(44,"label",26),e._uU(45,"Student"),e.qZA()(),e.TgZ(46,"div",24),e._UZ(47,"input",27),e.TgZ(48,"label",28),e._uU(49,"School"),e.qZA()(),e.TgZ(50,"div",29),e.YNc(51,P,2,0,"em",17),e.qZA()(),e.TgZ(52,"div",30)(53,"button",31),e._uU(54,"Create Account"),e.qZA()()(),e.TgZ(55,"p",32),e._uU(56," Already have an account? "),e.TgZ(57,"a",33),e._uU(58,"Login"),e.qZA()()()()()()()),2&s&&(e.xp6(8),e.Q6J("ngIf",r.showError),e.xp6(2),e.Q6J("formGroup",r.registerForm),e.xp6(14),e.Q6J("ngIf",r.validateControl("email")&&r.hasError("email","email")),e.xp6(1),e.Q6J("ngIf",r.validateControl("email")&&r.hasError("email","required")),e.xp6(6),e.Q6J("ngIf",r.validateControl("password")&&r.hasError("password","required")),e.xp6(6),e.Q6J("ngIf",r.validateControl("confirm")&&r.hasError("confirm","required")),e.xp6(1),e.Q6J("ngIf",r.hasError("confirm","mustMatch")),e.xp6(13),e.Q6J("ngIf",r.validateControl("userType")&&r.hasError("userType","required")),e.xp6(2),e.Q6J("disabled",!r.registerForm.valid))},dependencies:[d.O5,o._Y,o.Fj,o._,o.JJ,o.JL,o.sg,o.u,c.rH,f.q],styles:[".action-btns[_ngcontent-%COMP%]{margin-bottom:1rem}.top-header[_ngcontent-%COMP%]{margin-top:100px}.form-check[_ngcontent-%COMP%]{margin-bottom:1rem}.form-check-input[_ngcontent-%COMP%]{margin-right:.5rem}.form-check-label[_ngcontent-%COMP%]{margin-bottom:0}.text-danger[_ngcontent-%COMP%]{font-size:.875rem}"]})}return t})();function y(t,l){if(1&t&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.errorMessage," ")}}function F(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Username is required"),e.qZA())}function I(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Password is required"),e.qZA())}let S=(()=>{class t{constructor(i,s,r){this.authService=i,this.router=s,this.route=r,this.errorMessage="",this.validateControl=n=>this.loginForm.get(n).invalid&&this.loginForm.get(n).touched,this.hasError=(n,a)=>this.loginForm.get(n).hasError(a),this.loginUser=n=>{this.authService.isExternalAuth=!1,this.showError=!1;const a={...n},g={email:a.username,password:a.password,clientURI:h.N.clientUrl+"/authentication/forgotpassword"};this.authService.loginUser("api/accounts/login",g).subscribe({next:m=>{m.is2StepVerificationRequired?this.router.navigate(["/authentication/twostepverification"],{queryParams:{returnUrl:this.returnUrl,provider:m.provider,email:g.email}}):(localStorage.setItem("token",m.token),this.authService.sendAuthStateChangeNotification(m.isAuthSuccessful),console.log("status: "+m.isAuthSuccessful),this.authService.isUserStudent()&&this.router.navigate(["/student-portal"]),this.authService.isUserSchool()&&this.router.navigate(["/school-portal"]))},error:m=>{this.errorMessage=m.message,this.showError=!0}})}}ngOnInit(){this.loginForm=new o.cw({username:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required])}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.$),e.Y36(c.F0),e.Y36(c.gz))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:33,vars:4,consts:[[1,"sign-up-in-section","bg-light","ptb-120"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-5","col-md-8","col-12"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-signin"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","username","formControlName","username",1,"form-control"],["for","username"],[1,"text-danger"],[4,"ngIf"],["type","password","id","password","formControlName","password",1,"form-control"],["for","password"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-primary","mt-3","d-block","w-100"],[1,"mt-4","text-center"],["routerLink","//authentication/forgotpassword",1,"text-decoration-none"],[1,"font-monospace","fw-medium","text-center","text-muted","mt-2","mb-0"],["routerLink","/authentication/register",1,"text-decoration-none"],["role","alert",1,"alert","alert-danger"]],template:function(s,r){1&s&&(e._UZ(0,"app-close-header"),e.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),e._uU(7,"Sign in"),e.qZA()(),e.TgZ(8,"main",6),e.YNc(9,y,2,1,"div",7),e.TgZ(10,"form",8),e.NdJ("ngSubmit",function(){return r.loginUser(r.loginForm.value)}),e.TgZ(11,"div",9),e._UZ(12,"input",10),e.TgZ(13,"label",11),e._uU(14,"Username:"),e.qZA(),e.TgZ(15,"span",12),e.YNc(16,F,2,0,"em",13),e.qZA()(),e.TgZ(17,"div",9),e._UZ(18,"input",14),e.TgZ(19,"label",15),e._uU(20,"Password:"),e.qZA(),e.TgZ(21,"span",12),e.YNc(22,I,2,0,"em",13),e.qZA()(),e.TgZ(23,"div",16)(24,"button",17),e._uU(25,"Log in"),e.qZA()()(),e.TgZ(26,"div",18)(27,"a",19),e._uU(28," Forgot username or password "),e.qZA()(),e.TgZ(29,"p",20),e._uU(30," Don't have an account yet? "),e.TgZ(31,"a",21),e._uU(32,"Create account"),e.qZA()()()()()()()),2&s&&(e.xp6(9),e.Q6J("ngIf",r.showError),e.xp6(1),e.Q6J("formGroup",r.loginForm),e.xp6(6),e.Q6J("ngIf",r.validateControl("username")&&r.hasError("username","required")),e.xp6(6),e.Q6J("ngIf",r.validateControl("password")&&r.hasError("password","required")))},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,c.rH,f.q],styles:[".close-btn[_ngcontent-%COMP%]{font-size:24px;background-color:transparent;border:none;cursor:pointer}.close-btn[_ngcontent-%COMP%]:hover{color:red}"]})}return t})();function N(t,l){if(1&t&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.errorMessage," ")}}function x(t,l){if(1&t&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.successMessage," ")}}function J(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Email is required"),e.qZA())}let E=(()=>{class t{constructor(i){this._authService=i,this.validateControl=s=>this.forgotPasswordForm.get(s).invalid&&this.forgotPasswordForm.get(s).touched,this.hasError=(s,r)=>this.forgotPasswordForm.get(s).hasError(r),this.forgotPassword=s=>{this.showError=this.showSuccess=!1;const n={email:{...s}.email,clientURI:h.N.clientUrl+"/authentication/resetpassword"};this._authService.forgotPassword("api/accounts/forgotpassword",n).subscribe({next:a=>{this.showSuccess=!0,this.successMessage="The link has been sent, please check your email to reset your password."},error:a=>{this.showError=!0,this.errorMessage=a.message}})}}ngOnInit(){this.forgotPasswordForm=new o.cw({email:new o.NI("",[o.kI.required])})}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.$))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-forgot-password"]],decls:27,vars:5,consts:[[1,"sign-up-in-section","bg-light","ptb-20"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-5","col-md-8","col-12"],[1,"form-signin"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"form-floating","mb-3"],["type","text","id","email","formControlName","email",1,"form-control"],["for","email"],[1,"text-danger"],[4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","mt-3","d-block","w-100",3,"disabled"],["type","button","routerLink","/authentication/login",1,"btn","mt-3","d-block","w-100","btn-danger"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"]],template:function(s,r){1&s&&(e._UZ(0,"app-close-header"),e.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"main",4)(6,"form",5),e.NdJ("ngSubmit",function(){return r.forgotPassword(r.forgotPasswordForm.value)}),e.TgZ(7,"div",6)(8,"h1",7),e._uU(9," Forgot Password "),e.qZA(),e.YNc(10,N,2,1,"div",8),e.YNc(11,x,2,1,"div",9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"label",12),e._uU(15,"Email:"),e.qZA(),e.TgZ(16,"span",13),e.YNc(17,J,2,0,"em",14),e.qZA()(),e.TgZ(18,"div",15)(19,"div",16)(20,"div",17)(21,"button",18),e._uU(22,"Send"),e.qZA()()(),e.TgZ(23,"div",16)(24,"div",17)(25,"button",19),e._uU(26,"Cancel"),e.qZA()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("formGroup",r.forgotPasswordForm),e.xp6(4),e.Q6J("ngIf",r.showError),e.xp6(1),e.Q6J("ngIf",r.showSuccess),e.xp6(6),e.Q6J("ngIf",r.validateControl("email")&&r.hasError("email","required")),e.xp6(4),e.Q6J("disabled",!r.forgotPasswordForm.valid))},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,c.rH,f.q]})}return t})();function k(t,l){if(1&t&&(e.TgZ(0,"div",22),e._UZ(1,"span",23),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("innerHTML",i.errorMessage,e.oJD)}}const Y=function(){return["/authentication/login"]};function M(t,l){1&t&&(e.TgZ(0,"div",24),e._uU(1," Your password has been reset. Please "),e.TgZ(2,"a",25),e._uU(3," click here to log in. "),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,Y)))}function Q(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Password is required"),e.qZA())}function L(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Confirmation is required"),e.qZA())}function R(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"Passwords must match"),e.qZA())}let O=(()=>{class t{constructor(i,s,r){this.authService=i,this.passConfValidator=s,this.route=r,this.validateControl=n=>this.resetPasswordForm.get(n).invalid&&this.resetPasswordForm.get(n).touched,this.hasError=(n,a)=>this.resetPasswordForm.get(n).hasError(a),this.resetPassword=n=>{this.showError=this.showSuccess=!1;const a={...n};this.authService.resetPassword("api/accounts/resetpassword",{password:a.password,confirmPassword:a.confirm,token:this.token,email:this.email}).subscribe({next:m=>this.showSuccess=!0,error:m=>{this.showError=!0,this.errorMessage=m.message}})}}ngOnInit(){this.resetPasswordForm=new o.cw({password:new o.NI("",[o.kI.required]),confirm:new o.NI("")}),this.resetPasswordForm.get("confirm").setValidators([o.kI.required,this.passConfValidator.validateConfirmPassword(this.resetPasswordForm.get("password"))]),this.token=this.route.snapshot.queryParams.token,this.email=this.route.snapshot.queryParams.email}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.$),e.Y36(v),e.Y36(c.gz))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],decls:34,vars:7,consts:[[1,"sign-up-in-section","bg-light","ptb-20"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-5","col-md-8","col-12"],[1,"form-signin"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","password","id","password","formControlName","password",1,"form-control"],["for","password"],[1,"text-danger"],[4,"ngIf"],["type","password","id","confirm","formControlName","confirm",1,"form-control"],["for","confirm"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success",3,"disabled"],["type","button","routerLink","/authentication/login",1,"btn","btn-block","btn-danger"],["role","alert",1,"alert","alert-danger"],[3,"innerHTML"],["role","alert",1,"alert","alert-success"],[3,"routerLink"]],template:function(s,r){1&s&&(e._UZ(0,"app-close-header"),e.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"main",4)(6,"div",5)(7,"h1",6),e._uU(8," Change your password "),e.qZA()(),e.YNc(9,k,2,1,"div",7),e.YNc(10,M,4,2,"div",8),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return r.resetPassword(r.resetPasswordForm.value)}),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"label",12),e._uU(15,"Password:"),e.qZA(),e.TgZ(16,"span",13),e.YNc(17,Q,2,0,"em",14),e.qZA()(),e.TgZ(18,"div",10),e._UZ(19,"input",15),e.TgZ(20,"label",16),e._uU(21,"Confirm Password:"),e.qZA(),e.TgZ(22,"span",13),e.YNc(23,L,2,0,"em",14),e.YNc(24,R,2,0,"em",14),e.qZA()(),e.TgZ(25,"div",17)(26,"div",18)(27,"div",19)(28,"button",20),e._uU(29,"Change Password"),e.qZA()()(),e.TgZ(30,"div",18)(31,"div",19)(32,"button",21),e._uU(33,"Cancel"),e.qZA()()()()()()()()()()),2&s&&(e.xp6(9),e.Q6J("ngIf",r.showError),e.xp6(1),e.Q6J("ngIf",r.showSuccess),e.xp6(1),e.Q6J("formGroup",r.resetPasswordForm),e.xp6(6),e.Q6J("ngIf",r.validateControl("password")&&r.hasError("password","required")),e.xp6(6),e.Q6J("ngIf",r.validateControl("confirm")&&r.hasError("confirm","required")),e.xp6(1),e.Q6J("ngIf",r.hasError("confirm","mustMatch")),e.xp6(4),e.Q6J("disabled",!r.resetPasswordForm.valid))},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,c.rH,f.q]})}return t})();function V(t,l){if(1&t&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.errorMessage," ")}}const j=function(){return["/authentication/login"]};function G(t,l){1&t&&(e.TgZ(0,"div",6),e._uU(1," Your email has been successfully confirmed. Please "),e.TgZ(2,"a",7),e._uU(3," click here to log in. "),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,j)))}let z=(()=>{class t{constructor(i,s){this._authService=i,this._route=s,this.confirmEmail=()=>{this.showError=this.showSuccess=!1,this._authService.confirmEmail("api/accounts/emailconfirmation",this._route.snapshot.queryParams.token,this._route.snapshot.queryParams.email).subscribe({next:a=>this.showSuccess=!0,error:a=>{this.showError=!0,this.errorMessage=a.message}})}}ngOnInit(){this.confirmEmail()}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.$),e.Y36(c.gz))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-email-confirmation"]],decls:6,vars:2,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],[3,"routerLink"]],template:function(s,r){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Email Confirmation"),e.qZA(),e.YNc(4,V,2,1,"div",3),e.YNc(5,G,4,2,"div",4),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("ngIf",r.showError),e.xp6(1),e.Q6J("ngIf",r.showSuccess))},dependencies:[d.O5,c.rH]})}return t})();function H(t,l){if(1&t&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.errorMessage," ")}}function D(t,l){1&t&&(e.TgZ(0,"em"),e._uU(1,"The Code is required"),e.qZA())}let X=(()=>{class t{constructor(i,s,r){this.authService=i,this.route=s,this.router=r,this.validateControl=n=>this.twoStepForm.get(n).invalid&&this.twoStepForm.get(n).touched,this.hasError=(n,a)=>this.twoStepForm.get(n).hasError(a),this.loginUser=n=>{this.showError=!1;const a={...n};this.authService.twoStepLogin("api/accounts/twostepverification",{email:this.email,provider:this.provider,token:a.twoFactorCode}).subscribe({next:m=>{localStorage.setItem("token",m.token),this.authService.sendAuthStateChangeNotification(m.isAuthSuccessful),this.router.navigate([this.returnUrl])},error:m=>{this.errorMessage=m.message,this.showError=!0}})}}ngOnInit(){this.twoStepForm=new o.cw({twoFactorCode:new o.NI("",[o.kI.required])}),this.provider=this.route.snapshot.queryParams.provider,this.email=this.route.snapshot.queryParams.email,this.returnUrl=this.route.snapshot.queryParams.returnUrl}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.$),e.Y36(c.gz),e.Y36(c.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-two-step-verification"]],decls:18,vars:4,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","twoFactorCode",1,"col-form-label","col-sm-2"],[1,"col-md-5"],["type","text","id","twoFactorCode","formControlName","twoFactorCode",1,"form-control"],[4,"ngIf"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"]],template:function(s,r){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Two Step Verification"),e.qZA(),e.YNc(4,H,2,1,"div",3),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return r.loginUser(r.twoStepForm.value)}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"Code:"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",7),e.YNc(12,D,2,0,"em",9),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"div",5)(15,"div",10)(16,"button",11),e._uU(17,"Submit"),e.qZA()()()()()()),2&s&&(e.xp6(4),e.Q6J("ngIf",r.showError),e.xp6(1),e.Q6J("formGroup",r.twoStepForm),e.xp6(7),e.Q6J("ngIf",r.validateControl("twoFactorCode")&&r.hasError("twoFactorCode","required")),e.xp6(4),e.Q6J("disabled",!r.twoStepForm.valid))},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return t})();var $=u(6208);let B=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#r=this.\u0275inj=e.cJS({imports:[d.ez,o.UX,$.m,c.Bz.forChild([{path:"register",component:A},{path:"login",component:S},{path:"forgotpassword",component:E},{path:"resetpassword",component:O},{path:"emailconfirmation",component:z},{path:"twostepverification",component:X}])]})}return t})()}}]);